- name: apache-tomcat | {{ansible_distribution}} {{ansible_distribution_major_version}} | 0.0 Check the services that are active
  service_facts: #apache-tomcat
  register: services_state

- name: Debug
  debug:
    var: services_state

- name: apache-tomcat | {{ansible_distribution}} {{ansible_distribution_major_version}} | 1.1 Check if apache-tomcat is installed
  debug:
    msg: "{{services_state.ansible_facts.services}}"
  # when:
  # - services_state.ansible_facts.services.{{tomcat}} is defined
#tomcat8.service
  #/opt/apache-tomcat-8.5.35/bin

- name: apache-tomcat | {{ansible_distribution}} {{ansible_distribution_major_version}} | 1.2 Check if apache-tomcat is already installed
  stat:
    path:  /opt/apache-tomcat-8.5.35
  register: apache_tomcat

- name: apache-tomcat | {{ansible_distribution}} {{ansible_distribution_major_version}} | 1.3 find apache-tomcat version
  command: /opt/apache-tomcat-8.5.35/bin/version.sh
  register: tomcat_info
  when:
  - apache_tomcat.stat.exists

- name: apache-tomcat | {{ansible_distribution}} {{ansible_distribution_major_version}} | 1.4 print apache-tomcat version
  debug:
    msg: "{{tomcat_info.stdout_lines}}"
  when:
  - apache_tomcat.stat.exists

- name: Install nginx rpm from a local file
  dnf:
    name: /usr/local/src/nginx-release-centos-6-0.el6.ngx.noarch.rpm
    state: present

# - name:  packages installed as dependencies
#   dnf:
#     allow_downgrade: yes
#   register: all_packages_host

# - name: apache-tomcat | {{ansible_distribution}} {{ansible_distribution_major_version}} | 1.4 print apache-tomcat version
#   debug:
#     msg: "{{all_packages_host}}"

# allow_downgrade